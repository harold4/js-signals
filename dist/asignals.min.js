/*

 JS Signals <http://millermedeiros.github.com/js-signals/>
 Released under the MIT license
 Author: Miller Medeiros
 Version: 2.0.1 - Build: 274 (2025/03/14 07:06 PM)
*/
(function(k){function h(a,b,c,d,f){this._listener=b;this._isOnce=c;this.context=d;this._signal=a;this._priority=f||0}function g(a,b){if("function"!==typeof a)throw Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",b));}function e(){this._bindings=[];this._prevParams=null;var a=this;this.dispatch=async function(){await e.prototype.dispatch.apply(a,arguments)}}h.prototype={active:!0,params:null,execute:async function(a){if(this.active&&this._listener){a=this.params?
this.params.concat(a):a;try{var b=await this._listener.apply(this.context,a)}finally{this._isOnce&&this.detach()}}return b},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal;delete this._listener;delete this.context},toString:function(){return"[ASignalBinding isOnce:"+
this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}};e.prototype={VERSION:"2.0.1",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:async function(a,b,c,d){var f=this._indexOfListener(a,c);if(-1!==f){if(a=this._bindings[f],a.isOnce()!==b)throw Error("You cannot add"+(b?"":"Once")+"() then add"+(b?"Once":"")+"() the same listener without removing the relationship first.");}else a=new h(this,a,b,c,d),this._addBinding(a);this.memorize&&this._prevParams&&await a.execute(this._prevParams);
return a},_addBinding:function(a){var b=this._bindings.length;do--b;while(this._bindings[b]&&a._priority<=this._bindings[b]._priority);this._bindings.splice(b+1,0,a)},_indexOfListener:function(a,b){for(var c=this._bindings.length,d;c--;)if(d=this._bindings[c],d._listener===a&&d.context===b)return c;return-1},has:function(a,b){return-1!==this._indexOfListener(a,b)},add:async function(a,b,c){g(a,"add");return await this._registerListener(a,!1,b,c)},addOnce:async function(a,b,c){g(a,"addOnce");return await this._registerListener(a,
!0,b,c)},remove:function(a,b){g(a,"remove");b=this._indexOfListener(a,b);-1!==b&&(this._bindings[b]._destroy(),this._bindings.splice(b,1));return a},removeAll:function(){for(var a=this._bindings.length;a--;)this._bindings[a]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:async function(a){if(this.active){for(var b=arguments.length,c=Array(b),d=0;d<b;++d)c[d]=arguments[d];b=this._bindings.length;this.memorize&&
(this._prevParams=c);if(b){d=this._bindings.slice();this._shouldPropagate=!0;do b--;while(d[b]&&this._shouldPropagate&&!1!==await d[b].execute(c))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll();delete this._bindings;delete this._prevParams},toString:function(){return"[ASignal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};e.ASignal=e;"function"===typeof define&&define.amd?define(function(){return e}):"undefined"!==typeof module&&module.exports?
module.exports=e:k.asignals=e})(this);
